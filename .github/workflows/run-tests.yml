name: ðŸ§ª Run Java Tests
on:
 push:
   branches: [ main, develop ]
 pull_request:
   branches: [ main, develop ]
jobs:
 build:
   runs-on: ubuntu-latest
   steps:
     - name: ðŸ§© Checkout repository
       uses: actions/checkout@v4
     - name: â˜• Set up Java
       uses: actions/setup-java@v4
       with:
         distribution: 'temurin'
         java-version: '17'
     - name: ðŸ§° Download JUnit Console
       run: |
         mkdir -p libs
         curl -L -o libs/junit-platform-console-standalone.jar https://repo1.maven.org/maven2/org/junit/platform/junit-platform-console-standalone/1.9.3/junit-platform-console-standalone-1.9.3.jar
     - name: ðŸ§¹ Clean and Compile main Java files
       run: |
         mkdir -p out
         if [ -d "src" ]; then
           find src -name "*.java" > sources.txt
         elif [ -d "ReturnABook/src" ]; then
           find ReturnABook/src -name "*.java" > sources.txt
         else
           find . -name "*.java" > sources.txt
         fi
         javac -d out -cp libs/junit-platform-console-standalone.jar @sources.txt
     - name: ðŸ§ª Run JUnit tests
       run: |
         if [ -d "src" ]; then
           find src -name "*.java" > tests.txt
         elif [ -d "ReturnABook/src" ]; then
           find ReturnABook/src -name "*.java" > tests.txt
         else
           find . -name "*.java" > tests.txt
         fi
         javac -d out -cp "libs/junit-platform-console-standalone.jar:out" @tests.txt
         java -jar libs/junit-platform-console-standalone.jar \
           --class-path out \
           --scan-class-path
