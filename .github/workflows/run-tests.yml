name: Run Java Tests
on:
 push:
   branches: [main]
 pull_request:
   branches: [main]
jobs:
 test:
   runs-on: ubuntu-latest
   steps:
     - name: ðŸ§­ Checkout repository
       uses: actions/checkout@v4
     - name: â˜• Set up Java
       uses: actions/setup-java@v4
       with:
         java-version: '17'
         distribution: 'temurin'
     - name: ðŸ“¦ Download JUnit
       run: |
         mkdir -p libs
         curl -L -o libs/junit-platform-console-standalone.jar \
https://repo1.maven.org/maven2/org/junit/platform/junit-platform-console-standalone/1.9.3/junit-platform-console-standalone-1.9.3.jar
     - name: ðŸ§¹ Clean and Compile main Java files
       run: |
         echo "ðŸ§¹ Cleaning old compiled files..."
         rm -rf out
         mkdir -p out
         echo "ðŸŽ¯ Compiling only main (non-test) Java files..."
         find . -path "./*/src/test*" -prune -o -name "*.java" -print > sources.txt
         javac -cp "libs/junit-platform-console-standalone.jar" -d out @sources.txt
     - name: ðŸ§ª Run JUnit Tests
       run: |
         echo "ðŸš€ Running JUnit tests..."
         java -jar libs/junit-platform-console-standalone.jar \
         --class-path out \
         --scan-class-path || true
     - name: âœ… All Done
       run: echo "ðŸŽ‰ Workflow finished successfully!"
